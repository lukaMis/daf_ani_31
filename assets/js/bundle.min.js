"use strict";var daf_ani_31={};daf_ani_31.CARD_OPEN_AUDIO_DELAY=1e3,daf_ani_31.CARD_CLOSED_LISTNERS_DELAY=1e3,daf_ani_31.removePreloader=function(){$("body").removeClass("loading")},daf_ani_31.DataHandler=function(){var n={};return n.init=function(){daf_ani_31.DATA=i18n.t("data",{returnObjectTrees:!0})},n.getData=function(){return daf_ani_31.DATA},n.getCardsData=function(){return daf_ani_31.DATA.cards},n.getTitleData=function(){return daf_ani_31.DATA.title},n},daf_ani_31.SoundControl=function(){var n={},t=0,o=0,a=function(n){createjs.Sound.on("fileload",i);for(var t=0;t<n.cards.length;t++)o++,createjs.Sound.registerSound("assets/audio/"+n.cards[t].audio+".mp3",n.cards[t].audio);o++,createjs.Sound.registerSound("assets/audio/"+n.title.audio+".mp3",n.title.audio)},i=function(){t++,t===o&&(t=null,o=null,$(n).trigger("onAudioLoadComplete"))},e=function(n){createjs.Sound.play(n).on("complete",r)},r=function t(o){o.target.off("complete",t),$(n).trigger("onAudioCompleted")};return n.init=function(n){a(n)},n.play=function(n){e(n)},n},daf_ani_31.CardsControl=function(n){var t={},o=[],a=250,i=0,e=0,r=0,d=void 0,u=0,c=void 0,f=void 0,l=n.soundControl,_=function(n){i=n.length,d=n,s(d[e])},s=function(n){var t={};o[e]=t,o[e].audio=n.audio,Snap.load("assets/images/cards/"+n.front+".svg",function(n){p(n,"front")}),Snap.load("assets/images/cards/"+n.left+".svg",function(n){p(n,"left")}),Snap.load("assets/images/cards/"+n.right+".svg",function(n){p(n,"right")})},p=function(n,t){o[e][t]=n,r++,3===r&&(r=0,e++,e<i?s(d[e]):T())},T=function(){for(var n="",t=0;t<o.length;t++)n+='<div class="card opacity-0" \n        id="card-'+t+'" \n        data-open="false" \n        data-audio="'+o[t].audio+'">\n\n        <div class="card-side front"></div>\n        <div class="card-side left"></div>\n        <div class="card-side right"></div>\n      </div>';$("#contentWrapper").append(n),setTimeout(function(){v()},50)},v=function(){for(var n=function(n){Snap("#card-"+n+" .front").append(o[n].front),Snap("#card-"+n+" .left").append(o[n].left),Snap("#card-"+n+" .right").append(o[n].right),setTimeout(function(){C($("#card-"+n))},n*a+50)},t=0;t<o.length;t++)n(t)},C=function(n){n.removeClass("opacity-0"),u++,u===i&&($(t).trigger("onCardsReady"),m())},m=function(){$(".card").on("click",g)},A=function(){$(".card").off("click",g)},g=function(n){A(),c=$(n.currentTarget)[0].id.slice(-1),D(c)},D=function(n){f=$("#card-"+n),f.one("transitionend",S),f.attr({"data-open":!0}),$("#contentWrapper").attr({"data-cardselected":!0})},S=function n(){f.off("transitionend",n),setTimeout(function(){$(t).trigger("onCardIsOpen")},daf_ani_31.CARD_OPEN_AUDIO_DELAY)},E=function(){$(l).one("onAudioCompleted",L),l.play(f.attr("data-audio"))},L=function(){$(t).trigger("onAudioCompleted")},k=function(){f.one("click",y).addClass("close-button")},y=function(){f.one("transitionend",W).removeClass("close-button"),f.attr({"data-open":!1})},W=function n(){f.off("transitionend",n),setTimeout(function(){$("#contentWrapper").attr({"data-cardselected":!1}),$(t).trigger("onCardIsClosed"),m()},daf_ani_31.CARD_CLOSED_LISTNERS_DELAY)};return t.init=function(n){_(n)},t.play=function(){E()},t.enableCloseCard=function(){k()},t},daf_ani_31.TitleControl=function(n){var t={},o=n.soundControl,a=function(n){var t='<div id="titleWrapper">\n      <p>'+n.text+"</p>\n    </div>";$("#contentWrapper").append(t)},i=function(){$("#wrapper").one("click",e),setTimeout(function(){$("#wrapper").append('<div id="playButton"></div>')},20)},e=function(n){n.preventDefault(),n.stopPropagation(),$("#playButton").remove(),o.play(t.data.audio)};return t.init=function(n){t.data=n,a(t.data),i()},t},daf_ani_31.Controller=function(n){var t={},o=(n.soundControl,n.cardsControl),a=(n.titleControl,function(){$(o).on("onCardIsOpen",i),$(o).on("onAudioCompleted",e)}),i=function(){o.play()},e=function(){o.enableCloseCard()};return t.init=function(){a()},t},daf_ani_31.Bootstrap=function(){var n={},t=daf_ani_31.DataHandler(),o=daf_ani_31.SoundControl();$(o).on("onAudioLoadComplete",function(){a.init(t.getCardsData())});var a=daf_ani_31.CardsControl({soundControl:o});$(a).on("onCardsReady",function(){i.init(t.getTitleData()),e.init(),daf_ani_31.removePreloader()});var i=daf_ani_31.TitleControl({soundControl:o}),e=daf_ani_31.Controller({soundControl:o,cardsControl:a,titleControl:i});return t.init(),o.init(t.getData()),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),daf_ani_31.Bootstrap()}$(document).one("i18nComplete",n)}();