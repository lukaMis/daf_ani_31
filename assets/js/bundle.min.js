"use strict";var daf_ani_31={};daf_ani_31.CARD_OPEN_AUDIO_DELAY=1e3,daf_ani_31.CARD_CLOSED_LISTNERS_DELAY=1e3,daf_ani_31.removePreloader=function(){$("body").removeClass("loading")},daf_ani_31.DataHandler=function(){var n={};return n.init=function(){daf_ani_31.DATA=i18n.t("data",{returnObjectTrees:!0})},n.getData=function(){return daf_ani_31.DATA},n.getCardsData=function(){return daf_ani_31.DATA.cards},n.getTitleData=function(){return daf_ani_31.DATA.title},n},daf_ani_31.SoundControl=function(){var n={},t=0,a=0,o=function(n){createjs.Sound.on("fileload",i);for(var t=0;t<n.cards.length;t++)a++,createjs.Sound.registerSound("assets/audio/"+n.cards[t].audio+".mp3",n.cards[t].audio);a++,createjs.Sound.registerSound("assets/audio/"+n.title.audio+".mp3",n.title.audio)},i=function(){t++,t===a&&(t=null,a=null,$(n).trigger("onAudioLoadComplete"))},e=function(n){var t=createjs.Sound.play(n);t.on("complete",r)},r=function t(a){a.target.off("complete",t),$(n).trigger("onAudioCompleted")};return n.init=function(n){o(n)},n.play=function(n){e(n)},n},daf_ani_31.CardsControl=function(n){var t={},a=[],o=250,i=0,e=0,r=0,d=void 0,c=0,u=void 0,f=void 0,l=n.soundControl,s=function(n){i=n.length,d=n,_(d[e])},_=function(n){var t={};a[e]=t,a[e].audio=n.audio,Snap.load("assets/images/cards/"+n.front+".svg",function(n){p(n,"front")}),Snap.load("assets/images/cards/"+n.left+".svg",function(n){p(n,"left")}),Snap.load("assets/images/cards/"+n.right+".svg",function(n){p(n,"right")})},p=function(n,t){a[e][t]=n,r++,3===r&&(r=0,e++,e<i?_(d[e]):C())},C=function(){for(var n="",t=0;t<a.length;t++)n+='<div class="card opacity-0" \n        id="card-'+t+'" \n        data-open="false" \n        data-audio="'+a[t].audio+'">\n\n        <div class="card-side front"></div>\n        <div class="card-side left"></div>\n        <div class="card-side right"></div>\n      </div>';$("#contentWrapper").append(n),setTimeout(function(){g()},50)},g=function(){for(var n=function(n){Snap("#card-"+n+" .front").append(a[n].front),Snap("#card-"+n+" .left").append(a[n].left),Snap("#card-"+n+" .right").append(a[n].right),setTimeout(function(){v($("#card-"+n))},n*o+50)},t=0;t<a.length;t++)n(t)},v=function(n){n.removeClass("opacity-0"),c++,c===i&&($(t).trigger("onCardsReady"),m())},m=function(){$(".card").on("click",D)},A=function(){$(".card").off("click",D)},D=function(n){A(),u=$(n.currentTarget)[0].id.slice(-1),S(u)},S=function(n){f=$("#card-"+n),f.one("transitionend",T),f.attr({"data-open":!0}),$("#contentWrapper").attr({"data-cardselected":!0})},T=function n(){f.off("transitionend",n),setTimeout(function(){$(t).trigger("onCardIsOpen")},daf_ani_31.CARD_OPEN_AUDIO_DELAY)},y=function(){$(l).one("onAudioCompleted",h),l.play(f.attr("data-audio"))},h=function(){$(t).trigger("onAudioCompleted")},E=function(){f.one("click",L).addClass("close-button")},L=function(){f.one("transitionend",O).removeClass("close-button"),f.attr({"data-open":!1})},O=function n(){f.off("transitionend",n),setTimeout(function(){$("#contentWrapper").attr({"data-cardselected":!1}),$(t).trigger("onCardIsClosed"),m()},daf_ani_31.CARD_CLOSED_LISTNERS_DELAY)};return t.init=function(n){s(n)},t.play=function(){y()},t.enableCloseCard=function(){E()},t},daf_ani_31.TitleControl=function(n){var t={},a=n.soundControl,o=function(n){var t='<div id="titleWrapper">\n      <p>'+n.text+"</p>\n    </div>";$("#contentWrapper").append(t)};return t.init=function(n){t.data=n,o(t.data)},t.play=function(){a.play(t.data.audio)},t},daf_ani_31.Controller=function(n){var t={},a=(n.soundControl,n.cardsControl),o=n.titleControl,i=function(){o.play(),$(a).on("onCardIsOpen",e),$(a).on("onAudioCompleted",r)},e=function(){a.play()},r=function(){a.enableCloseCard()};return t.init=function(){i()},t},daf_ani_31.Bootstrap=function(){var n={},t=daf_ani_31.DataHandler(),a=daf_ani_31.SoundControl();$(a).on("onAudioLoadComplete",function(){o.init(t.getCardsData())});var o=daf_ani_31.CardsControl({soundControl:a});$(o).on("onCardsReady",function(){i.init(t.getTitleData()),e.init(),daf_ani_31.removePreloader()});var i=daf_ani_31.TitleControl({soundControl:a}),e=daf_ani_31.Controller({soundControl:a,cardsControl:o,titleControl:i});return t.init(),a.init(t.getData()),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),daf_ani_31.Bootstrap()}$(document).one("i18nComplete",n)}();